// Compiled by ClojureScript 1.10.879 {:static-fns true, :optimize-constants true, :optimizations :advanced}
goog.provide('compound2.core');
goog.require('cljs.core');
goog.require('cljs.core.constants');

/**
 * @interface
 */
compound2.core.Index = function(){};

var compound2$core$Index$id$dyn_22567 = (function (this$){
var x__4509__auto__ = (((this$ == null))?null:this$);
var m__4510__auto__ = (compound2.core.id[goog.typeOf(x__4509__auto__)]);
if((!((m__4510__auto__ == null)))){
return (m__4510__auto__.cljs$core$IFn$_invoke$arity$1 ? m__4510__auto__.cljs$core$IFn$_invoke$arity$1(this$) : m__4510__auto__.call(null,this$));
} else {
var m__4508__auto__ = (compound2.core.id["_"]);
if((!((m__4508__auto__ == null)))){
return (m__4508__auto__.cljs$core$IFn$_invoke$arity$1 ? m__4508__auto__.cljs$core$IFn$_invoke$arity$1(this$) : m__4508__auto__.call(null,this$));
} else {
throw cljs.core.missing_protocol("Index.id",this$);
}
}
});
compound2.core.id = (function compound2$core$id(this$){
if((((!((this$ == null)))) && ((!((this$.compound2$core$Index$id$arity$1 == null)))))){
return this$.compound2$core$Index$id$arity$1(this$);
} else {
return compound2$core$Index$id$dyn_22567(this$);
}
});

var compound2$core$Index$extract_key$dyn_22568 = (function (this$,x){
var x__4509__auto__ = (((this$ == null))?null:this$);
var m__4510__auto__ = (compound2.core.extract_key[goog.typeOf(x__4509__auto__)]);
if((!((m__4510__auto__ == null)))){
return (m__4510__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4510__auto__.cljs$core$IFn$_invoke$arity$2(this$,x) : m__4510__auto__.call(null,this$,x));
} else {
var m__4508__auto__ = (compound2.core.extract_key["_"]);
if((!((m__4508__auto__ == null)))){
return (m__4508__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4508__auto__.cljs$core$IFn$_invoke$arity$2(this$,x) : m__4508__auto__.call(null,this$,x));
} else {
throw cljs.core.missing_protocol("Index.extract-key",this$);
}
}
});
compound2.core.extract_key = (function compound2$core$extract_key(this$,x){
if((((!((this$ == null)))) && ((!((this$.compound2$core$Index$extract_key$arity$2 == null)))))){
return this$.compound2$core$Index$extract_key$arity$2(this$,x);
} else {
return compound2$core$Index$extract_key$dyn_22568(this$,x);
}
});

var compound2$core$Index$index$dyn_22569 = (function (this$,coll,k,x){
var x__4509__auto__ = (((this$ == null))?null:this$);
var m__4510__auto__ = (compound2.core.index[goog.typeOf(x__4509__auto__)]);
if((!((m__4510__auto__ == null)))){
return (m__4510__auto__.cljs$core$IFn$_invoke$arity$4 ? m__4510__auto__.cljs$core$IFn$_invoke$arity$4(this$,coll,k,x) : m__4510__auto__.call(null,this$,coll,k,x));
} else {
var m__4508__auto__ = (compound2.core.index["_"]);
if((!((m__4508__auto__ == null)))){
return (m__4508__auto__.cljs$core$IFn$_invoke$arity$4 ? m__4508__auto__.cljs$core$IFn$_invoke$arity$4(this$,coll,k,x) : m__4508__auto__.call(null,this$,coll,k,x));
} else {
throw cljs.core.missing_protocol("Index.index",this$);
}
}
});
compound2.core.index = (function compound2$core$index(this$,coll,k,x){
if((((!((this$ == null)))) && ((!((this$.compound2$core$Index$index$arity$4 == null)))))){
return this$.compound2$core$Index$index$arity$4(this$,coll,k,x);
} else {
return compound2$core$Index$index$dyn_22569(this$,coll,k,x);
}
});

var compound2$core$Index$unindex$dyn_22570 = (function (this$,coll,k,x){
var x__4509__auto__ = (((this$ == null))?null:this$);
var m__4510__auto__ = (compound2.core.unindex[goog.typeOf(x__4509__auto__)]);
if((!((m__4510__auto__ == null)))){
return (m__4510__auto__.cljs$core$IFn$_invoke$arity$4 ? m__4510__auto__.cljs$core$IFn$_invoke$arity$4(this$,coll,k,x) : m__4510__auto__.call(null,this$,coll,k,x));
} else {
var m__4508__auto__ = (compound2.core.unindex["_"]);
if((!((m__4508__auto__ == null)))){
return (m__4508__auto__.cljs$core$IFn$_invoke$arity$4 ? m__4508__auto__.cljs$core$IFn$_invoke$arity$4(this$,coll,k,x) : m__4508__auto__.call(null,this$,coll,k,x));
} else {
throw cljs.core.missing_protocol("Index.unindex",this$);
}
}
});
compound2.core.unindex = (function compound2$core$unindex(this$,coll,k,x){
if((((!((this$ == null)))) && ((!((this$.compound2$core$Index$unindex$arity$4 == null)))))){
return this$.compound2$core$Index$unindex$arity$4(this$,coll,k,x);
} else {
return compound2$core$Index$unindex$dyn_22570(this$,coll,k,x);
}
});

var compound2$core$Index$before$dyn_22571 = (function (this$,coll){
var x__4509__auto__ = (((this$ == null))?null:this$);
var m__4510__auto__ = (compound2.core.before[goog.typeOf(x__4509__auto__)]);
if((!((m__4510__auto__ == null)))){
return (m__4510__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4510__auto__.cljs$core$IFn$_invoke$arity$2(this$,coll) : m__4510__auto__.call(null,this$,coll));
} else {
var m__4508__auto__ = (compound2.core.before["_"]);
if((!((m__4508__auto__ == null)))){
return (m__4508__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4508__auto__.cljs$core$IFn$_invoke$arity$2(this$,coll) : m__4508__auto__.call(null,this$,coll));
} else {
throw cljs.core.missing_protocol("Index.before",this$);
}
}
});
compound2.core.before = (function compound2$core$before(this$,coll){
if((((!((this$ == null)))) && ((!((this$.compound2$core$Index$before$arity$2 == null)))))){
return this$.compound2$core$Index$before$arity$2(this$,coll);
} else {
return compound2$core$Index$before$dyn_22571(this$,coll);
}
});

var compound2$core$Index$after$dyn_22572 = (function (this$,coll){
var x__4509__auto__ = (((this$ == null))?null:this$);
var m__4510__auto__ = (compound2.core.after[goog.typeOf(x__4509__auto__)]);
if((!((m__4510__auto__ == null)))){
return (m__4510__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4510__auto__.cljs$core$IFn$_invoke$arity$2(this$,coll) : m__4510__auto__.call(null,this$,coll));
} else {
var m__4508__auto__ = (compound2.core.after["_"]);
if((!((m__4508__auto__ == null)))){
return (m__4508__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4508__auto__.cljs$core$IFn$_invoke$arity$2(this$,coll) : m__4508__auto__.call(null,this$,coll));
} else {
throw cljs.core.missing_protocol("Index.after",this$);
}
}
});
compound2.core.after = (function compound2$core$after(this$,coll){
if((((!((this$ == null)))) && ((!((this$.compound2$core$Index$after$arity$2 == null)))))){
return this$.compound2$core$Index$after$arity$2(this$,coll);
} else {
return compound2$core$Index$after$dyn_22572(this$,coll);
}
});


/**
 * @interface
 */
compound2.core.PrimaryIndex = function(){};

var compound2$core$PrimaryIndex$get_by_key$dyn_22573 = (function (this$,coll,k){
var x__4509__auto__ = (((this$ == null))?null:this$);
var m__4510__auto__ = (compound2.core.get_by_key[goog.typeOf(x__4509__auto__)]);
if((!((m__4510__auto__ == null)))){
return (m__4510__auto__.cljs$core$IFn$_invoke$arity$3 ? m__4510__auto__.cljs$core$IFn$_invoke$arity$3(this$,coll,k) : m__4510__auto__.call(null,this$,coll,k));
} else {
var m__4508__auto__ = (compound2.core.get_by_key["_"]);
if((!((m__4508__auto__ == null)))){
return (m__4508__auto__.cljs$core$IFn$_invoke$arity$3 ? m__4508__auto__.cljs$core$IFn$_invoke$arity$3(this$,coll,k) : m__4508__auto__.call(null,this$,coll,k));
} else {
throw cljs.core.missing_protocol("PrimaryIndex.get-by-key",this$);
}
}
});
compound2.core.get_by_key = (function compound2$core$get_by_key(this$,coll,k){
if((((!((this$ == null)))) && ((!((this$.compound2$core$PrimaryIndex$get_by_key$arity$3 == null)))))){
return this$.compound2$core$PrimaryIndex$get_by_key$arity$3(this$,coll,k);
} else {
return compound2$core$PrimaryIndex$get_by_key$dyn_22573(this$,coll,k);
}
});

var compound2$core$PrimaryIndex$get_all$dyn_22574 = (function (this$,coll){
var x__4509__auto__ = (((this$ == null))?null:this$);
var m__4510__auto__ = (compound2.core.get_all[goog.typeOf(x__4509__auto__)]);
if((!((m__4510__auto__ == null)))){
return (m__4510__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4510__auto__.cljs$core$IFn$_invoke$arity$2(this$,coll) : m__4510__auto__.call(null,this$,coll));
} else {
var m__4508__auto__ = (compound2.core.get_all["_"]);
if((!((m__4508__auto__ == null)))){
return (m__4508__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4508__auto__.cljs$core$IFn$_invoke$arity$2(this$,coll) : m__4508__auto__.call(null,this$,coll));
} else {
throw cljs.core.missing_protocol("PrimaryIndex.get-all",this$);
}
}
});
compound2.core.get_all = (function compound2$core$get_all(this$,coll){
if((((!((this$ == null)))) && ((!((this$.compound2$core$PrimaryIndex$get_all$arity$2 == null)))))){
return this$.compound2$core$PrimaryIndex$get_all$arity$2(this$,coll);
} else {
return compound2$core$PrimaryIndex$get_all$dyn_22574(this$,coll);
}
});

var compound2$core$PrimaryIndex$on_conflict$dyn_22575 = (function (this$,old,new$){
var x__4509__auto__ = (((this$ == null))?null:this$);
var m__4510__auto__ = (compound2.core.on_conflict[goog.typeOf(x__4509__auto__)]);
if((!((m__4510__auto__ == null)))){
return (m__4510__auto__.cljs$core$IFn$_invoke$arity$3 ? m__4510__auto__.cljs$core$IFn$_invoke$arity$3(this$,old,new$) : m__4510__auto__.call(null,this$,old,new$));
} else {
var m__4508__auto__ = (compound2.core.on_conflict["_"]);
if((!((m__4508__auto__ == null)))){
return (m__4508__auto__.cljs$core$IFn$_invoke$arity$3 ? m__4508__auto__.cljs$core$IFn$_invoke$arity$3(this$,old,new$) : m__4508__auto__.call(null,this$,old,new$));
} else {
throw cljs.core.missing_protocol("PrimaryIndex.on-conflict",this$);
}
}
});
compound2.core.on_conflict = (function compound2$core$on_conflict(this$,old,new$){
if((((!((this$ == null)))) && ((!((this$.compound2$core$PrimaryIndex$on_conflict$arity$3 == null)))))){
return this$.compound2$core$PrimaryIndex$on_conflict$arity$3(this$,old,new$);
} else {
return compound2$core$PrimaryIndex$on_conflict$dyn_22575(this$,old,new$);
}
});


/**
 * @interface
 */
compound2.core.Compound = function(){};

var compound2$core$Compound$items$dyn_22576 = (function (c){
var x__4509__auto__ = (((c == null))?null:c);
var m__4510__auto__ = (compound2.core.items[goog.typeOf(x__4509__auto__)]);
if((!((m__4510__auto__ == null)))){
return (m__4510__auto__.cljs$core$IFn$_invoke$arity$1 ? m__4510__auto__.cljs$core$IFn$_invoke$arity$1(c) : m__4510__auto__.call(null,c));
} else {
var m__4508__auto__ = (compound2.core.items["_"]);
if((!((m__4508__auto__ == null)))){
return (m__4508__auto__.cljs$core$IFn$_invoke$arity$1 ? m__4508__auto__.cljs$core$IFn$_invoke$arity$1(c) : m__4508__auto__.call(null,c));
} else {
throw cljs.core.missing_protocol("Compound.items",c);
}
}
});
compound2.core.items = (function compound2$core$items(c){
var temp__5751__auto__ = cljs.core.get.cljs$core$IFn$_invoke$arity$2(cljs.core.meta(c),cljs.core.with_meta(cljs.core.cst$sym$compound2$core_SLASH_items,new cljs.core.PersistentArrayMap(null, 1, [cljs.core.cst$kw$cljs$analyzer_SLASH_no_DASH_resolve,true], null)));
if(temp__5751__auto__){
var meta_impl__4511__auto__ = temp__5751__auto__;
return (meta_impl__4511__auto__.cljs$core$IFn$_invoke$arity$1 ? meta_impl__4511__auto__.cljs$core$IFn$_invoke$arity$1(c) : meta_impl__4511__auto__.call(null,c));
} else {
if((((!((c == null)))) && ((!((c.compound2$core$Compound$items$arity$1 == null)))))){
return c.compound2$core$Compound$items$arity$1(c);
} else {
return compound2$core$Compound$items$dyn_22576(c);
}
}
});

var compound2$core$Compound$add_items$dyn_22577 = (function (c,xs){
var x__4509__auto__ = (((c == null))?null:c);
var m__4510__auto__ = (compound2.core.add_items[goog.typeOf(x__4509__auto__)]);
if((!((m__4510__auto__ == null)))){
return (m__4510__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4510__auto__.cljs$core$IFn$_invoke$arity$2(c,xs) : m__4510__auto__.call(null,c,xs));
} else {
var m__4508__auto__ = (compound2.core.add_items["_"]);
if((!((m__4508__auto__ == null)))){
return (m__4508__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4508__auto__.cljs$core$IFn$_invoke$arity$2(c,xs) : m__4508__auto__.call(null,c,xs));
} else {
throw cljs.core.missing_protocol("Compound.add-items",c);
}
}
});
compound2.core.add_items = (function compound2$core$add_items(c,xs){
var temp__5751__auto__ = cljs.core.get.cljs$core$IFn$_invoke$arity$2(cljs.core.meta(c),cljs.core.with_meta(cljs.core.cst$sym$compound2$core_SLASH_add_DASH_items,new cljs.core.PersistentArrayMap(null, 1, [cljs.core.cst$kw$cljs$analyzer_SLASH_no_DASH_resolve,true], null)));
if(temp__5751__auto__){
var meta_impl__4511__auto__ = temp__5751__auto__;
return (meta_impl__4511__auto__.cljs$core$IFn$_invoke$arity$2 ? meta_impl__4511__auto__.cljs$core$IFn$_invoke$arity$2(c,xs) : meta_impl__4511__auto__.call(null,c,xs));
} else {
if((((!((c == null)))) && ((!((c.compound2$core$Compound$add_items$arity$2 == null)))))){
return c.compound2$core$Compound$add_items$arity$2(c,xs);
} else {
return compound2$core$Compound$add_items$dyn_22577(c,xs);
}
}
});

var compound2$core$Compound$remove_keys$dyn_22578 = (function (c,ks){
var x__4509__auto__ = (((c == null))?null:c);
var m__4510__auto__ = (compound2.core.remove_keys[goog.typeOf(x__4509__auto__)]);
if((!((m__4510__auto__ == null)))){
return (m__4510__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4510__auto__.cljs$core$IFn$_invoke$arity$2(c,ks) : m__4510__auto__.call(null,c,ks));
} else {
var m__4508__auto__ = (compound2.core.remove_keys["_"]);
if((!((m__4508__auto__ == null)))){
return (m__4508__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4508__auto__.cljs$core$IFn$_invoke$arity$2(c,ks) : m__4508__auto__.call(null,c,ks));
} else {
throw cljs.core.missing_protocol("Compound.remove-keys",c);
}
}
});
compound2.core.remove_keys = (function compound2$core$remove_keys(c,ks){
var temp__5751__auto__ = cljs.core.get.cljs$core$IFn$_invoke$arity$2(cljs.core.meta(c),cljs.core.with_meta(cljs.core.cst$sym$compound2$core_SLASH_remove_DASH_keys,new cljs.core.PersistentArrayMap(null, 1, [cljs.core.cst$kw$cljs$analyzer_SLASH_no_DASH_resolve,true], null)));
if(temp__5751__auto__){
var meta_impl__4511__auto__ = temp__5751__auto__;
return (meta_impl__4511__auto__.cljs$core$IFn$_invoke$arity$2 ? meta_impl__4511__auto__.cljs$core$IFn$_invoke$arity$2(c,ks) : meta_impl__4511__auto__.call(null,c,ks));
} else {
if((((!((c == null)))) && ((!((c.compound2$core$Compound$remove_keys$arity$2 == null)))))){
return c.compound2$core$Compound$remove_keys$arity$2(c,ks);
} else {
return compound2$core$Compound$remove_keys$dyn_22578(c,ks);
}
}
});

if((typeof compound2 !== 'undefined') && (typeof compound2.core !== 'undefined') && (typeof compound2.core.indexer !== 'undefined')){
} else {
compound2.core.indexer = (function (){var method_table__4701__auto__ = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(cljs.core.PersistentArrayMap.EMPTY);
var prefer_table__4702__auto__ = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(cljs.core.PersistentArrayMap.EMPTY);
var method_cache__4703__auto__ = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(cljs.core.PersistentArrayMap.EMPTY);
var cached_hierarchy__4704__auto__ = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(cljs.core.PersistentArrayMap.EMPTY);
var hierarchy__4705__auto__ = cljs.core.get.cljs$core$IFn$_invoke$arity$3(cljs.core.PersistentArrayMap.EMPTY,cljs.core.cst$kw$hierarchy,(function (){var fexpr__22579 = cljs.core.get_global_hierarchy;
return (fexpr__22579.cljs$core$IFn$_invoke$arity$0 ? fexpr__22579.cljs$core$IFn$_invoke$arity$0() : fexpr__22579.call(null));
})());
return (new cljs.core.MultiFn(cljs.core.symbol.cljs$core$IFn$_invoke$arity$2("compound2.core","indexer"),cljs.core.cst$kw$index_DASH_type,cljs.core.cst$kw$default,hierarchy__4705__auto__,method_table__4701__auto__,prefer_table__4702__auto__,method_cache__4703__auto__,cached_hierarchy__4704__auto__));
})();
}
compound2.core.indexer.cljs$core$IMultiFn$_add_method$arity$3(null,cljs.core.cst$kw$one_DASH_to_DASH_one,(function (opts){
var map__22580 = opts;
var map__22580__$1 = cljs.core.__destructure_map(map__22580);
var id = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__22580__$1,cljs.core.cst$kw$id);
var kfn = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__22580__$1,cljs.core.cst$kw$kfn);
var on_conflict = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__22580__$1,cljs.core.cst$kw$on_DASH_conflict);
var id__$1 = (function (){var or__4212__auto__ = id;
if(cljs.core.truth_(or__4212__auto__)){
return or__4212__auto__;
} else {
if((kfn instanceof cljs.core.Keyword)){
return kfn;
} else {
return null;
}
}
})();
var on_conflict__$1 = (function (){var or__4212__auto__ = on_conflict;
if(cljs.core.truth_(or__4212__auto__)){
return or__4212__auto__;
} else {
return (function (_,new$){
return new$;
});
}
})();
if((!((id__$1 == null)))){
} else {
throw (new Error(["Assert failed: ","Must provide an id","\n","(some? id)"].join('')));
}

if((typeof compound2 !== 'undefined') && (typeof compound2.core !== 'undefined') && (typeof compound2.core.t_compound2$core22581 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {compound2.core.PrimaryIndex}
 * @implements {cljs.core.IMeta}
 * @implements {compound2.core.Index}
 * @implements {cljs.core.IWithMeta}
*/
compound2.core.t_compound2$core22581 = (function (opts,map__22580,id,kfn,on_conflict,meta22582){
this.opts = opts;
this.map__22580 = map__22580;
this.id = id;
this.kfn = kfn;
this.on_conflict = on_conflict;
this.meta22582 = meta22582;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(compound2.core.t_compound2$core22581.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_22583,meta22582__$1){
var self__ = this;
var _22583__$1 = this;
return (new compound2.core.t_compound2$core22581(self__.opts,self__.map__22580,self__.id,self__.kfn,self__.on_conflict,meta22582__$1));
}));

(compound2.core.t_compound2$core22581.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_22583){
var self__ = this;
var _22583__$1 = this;
return self__.meta22582;
}));

(compound2.core.t_compound2$core22581.prototype.compound2$core$PrimaryIndex$ = cljs.core.PROTOCOL_SENTINEL);

(compound2.core.t_compound2$core22581.prototype.compound2$core$PrimaryIndex$get_by_key$arity$3 = (function (this$,coll,k){
var self__ = this;
var this$__$1 = this;
return cljs.core.get.cljs$core$IFn$_invoke$arity$2(coll,k);
}));

(compound2.core.t_compound2$core22581.prototype.compound2$core$PrimaryIndex$get_all$arity$2 = (function (this$,coll){
var self__ = this;
var this$__$1 = this;
return cljs.core.vals(coll);
}));

(compound2.core.t_compound2$core22581.prototype.compound2$core$PrimaryIndex$on_conflict$arity$3 = (function (this$,old,new$){
var self__ = this;
var this$__$1 = this;
return (self__.on_conflict.cljs$core$IFn$_invoke$arity$2 ? self__.on_conflict.cljs$core$IFn$_invoke$arity$2(old,new$) : self__.on_conflict.call(null,old,new$));
}));

(compound2.core.t_compound2$core22581.prototype.compound2$core$Index$ = cljs.core.PROTOCOL_SENTINEL);

(compound2.core.t_compound2$core22581.prototype.compound2$core$Index$id$arity$1 = (function (this$){
var self__ = this;
var this$__$1 = this;
return self__.id;
}));

(compound2.core.t_compound2$core22581.prototype.compound2$core$Index$extract_key$arity$2 = (function (this$,x){
var self__ = this;
var this$__$1 = this;
return (self__.kfn.cljs$core$IFn$_invoke$arity$1 ? self__.kfn.cljs$core$IFn$_invoke$arity$1(x) : self__.kfn.call(null,x));
}));

(compound2.core.t_compound2$core22581.prototype.compound2$core$Index$index$arity$4 = (function (this$,coll,k,x){
var self__ = this;
var this$__$1 = this;
return cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3(coll,k,x);
}));

(compound2.core.t_compound2$core22581.prototype.compound2$core$Index$unindex$arity$4 = (function (this$,coll,k,x){
var self__ = this;
var this$__$1 = this;
return cljs.core.dissoc_BANG_.cljs$core$IFn$_invoke$arity$2(coll,k);
}));

(compound2.core.t_compound2$core22581.prototype.compound2$core$Index$after$arity$2 = (function (this$,coll){
var self__ = this;
var this$__$1 = this;
return cljs.core.persistent_BANG_(coll);
}));

(compound2.core.t_compound2$core22581.prototype.compound2$core$Index$before$arity$2 = (function (this$,coll){
var self__ = this;
var this$__$1 = this;
return cljs.core.transient$((function (){var or__4212__auto__ = coll;
if(cljs.core.truth_(or__4212__auto__)){
return or__4212__auto__;
} else {
return cljs.core.PersistentArrayMap.EMPTY;
}
})());
}));

(compound2.core.t_compound2$core22581.getBasis = (function (){
return new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$opts,cljs.core.cst$sym$map__22580,cljs.core.cst$sym$id,cljs.core.cst$sym$kfn,cljs.core.cst$sym$on_DASH_conflict,cljs.core.cst$sym$meta22582], null);
}));

(compound2.core.t_compound2$core22581.cljs$lang$type = true);

(compound2.core.t_compound2$core22581.cljs$lang$ctorStr = "compound2.core/t_compound2$core22581");

(compound2.core.t_compound2$core22581.cljs$lang$ctorPrWriter = (function (this__4450__auto__,writer__4451__auto__,opt__4452__auto__){
return cljs.core._write(writer__4451__auto__,"compound2.core/t_compound2$core22581");
}));

/**
 * Positional factory function for compound2.core/t_compound2$core22581.
 */
compound2.core.__GT_t_compound2$core22581 = (function compound2$core$__GT_t_compound2$core22581(opts__$1,map__22580__$2,id__$2,kfn__$1,on_conflict__$2,meta22582){
return (new compound2.core.t_compound2$core22581(opts__$1,map__22580__$2,id__$2,kfn__$1,on_conflict__$2,meta22582));
});

}

return (new compound2.core.t_compound2$core22581(opts,map__22580__$1,id__$1,kfn,on_conflict__$1,cljs.core.PersistentArrayMap.EMPTY));
}));
compound2.core.indexer.cljs$core$IMultiFn$_add_method$arity$3(null,cljs.core.cst$kw$one_DASH_to_DASH_many,(function (opts){
var map__22584 = opts;
var map__22584__$1 = cljs.core.__destructure_map(map__22584);
var id = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__22584__$1,cljs.core.cst$kw$id);
var kfn = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__22584__$1,cljs.core.cst$kw$kfn);
var id__$1 = (function (){var or__4212__auto__ = id;
if(cljs.core.truth_(or__4212__auto__)){
return or__4212__auto__;
} else {
if((kfn instanceof cljs.core.Keyword)){
return kfn;
} else {
return null;
}
}
})();
if((!((id__$1 == null)))){
} else {
throw (new Error(["Assert failed: ","Must provide an id","\n","(some? id)"].join('')));
}

if((typeof compound2 !== 'undefined') && (typeof compound2.core !== 'undefined') && (typeof compound2.core.t_compound2$core22585 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IMeta}
 * @implements {compound2.core.Index}
 * @implements {cljs.core.IWithMeta}
*/
compound2.core.t_compound2$core22585 = (function (opts,map__22584,id,kfn,meta22586){
this.opts = opts;
this.map__22584 = map__22584;
this.id = id;
this.kfn = kfn;
this.meta22586 = meta22586;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(compound2.core.t_compound2$core22585.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_22587,meta22586__$1){
var self__ = this;
var _22587__$1 = this;
return (new compound2.core.t_compound2$core22585(self__.opts,self__.map__22584,self__.id,self__.kfn,meta22586__$1));
}));

(compound2.core.t_compound2$core22585.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_22587){
var self__ = this;
var _22587__$1 = this;
return self__.meta22586;
}));

(compound2.core.t_compound2$core22585.prototype.compound2$core$Index$ = cljs.core.PROTOCOL_SENTINEL);

(compound2.core.t_compound2$core22585.prototype.compound2$core$Index$id$arity$1 = (function (this$){
var self__ = this;
var this$__$1 = this;
return self__.id;
}));

(compound2.core.t_compound2$core22585.prototype.compound2$core$Index$extract_key$arity$2 = (function (this$,x){
var self__ = this;
var this$__$1 = this;
return (self__.kfn.cljs$core$IFn$_invoke$arity$1 ? self__.kfn.cljs$core$IFn$_invoke$arity$1(x) : self__.kfn.call(null,x));
}));

(compound2.core.t_compound2$core22585.prototype.compound2$core$Index$index$arity$4 = (function (this$,coll,k,x){
var self__ = this;
var this$__$1 = this;
var ex = cljs.core.get.cljs$core$IFn$_invoke$arity$2(coll,k);
return cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3(coll,k,cljs.core.conj.cljs$core$IFn$_invoke$arity$2((function (){var or__4212__auto__ = ex;
if(cljs.core.truth_(or__4212__auto__)){
return or__4212__auto__;
} else {
return cljs.core.PersistentHashSet.EMPTY;
}
})(),x));
}));

(compound2.core.t_compound2$core22585.prototype.compound2$core$Index$unindex$arity$4 = (function (this$,coll,k,x){
var self__ = this;
var this$__$1 = this;
var ex = cljs.core.get.cljs$core$IFn$_invoke$arity$2(coll,k);
var new$ = cljs.core.disj.cljs$core$IFn$_invoke$arity$2(ex,x);
if(cljs.core.seq(new$)){
return cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3(coll,k,new$);
} else {
return cljs.core.dissoc_BANG_.cljs$core$IFn$_invoke$arity$2(coll,k);
}
}));

(compound2.core.t_compound2$core22585.prototype.compound2$core$Index$after$arity$2 = (function (this$,coll){
var self__ = this;
var this$__$1 = this;
return cljs.core.persistent_BANG_(coll);
}));

(compound2.core.t_compound2$core22585.prototype.compound2$core$Index$before$arity$2 = (function (this$,coll){
var self__ = this;
var this$__$1 = this;
return cljs.core.transient$((function (){var or__4212__auto__ = coll;
if(cljs.core.truth_(or__4212__auto__)){
return or__4212__auto__;
} else {
return cljs.core.PersistentArrayMap.EMPTY;
}
})());
}));

(compound2.core.t_compound2$core22585.getBasis = (function (){
return new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$opts,cljs.core.cst$sym$map__22584,cljs.core.cst$sym$id,cljs.core.cst$sym$kfn,cljs.core.cst$sym$meta22586], null);
}));

(compound2.core.t_compound2$core22585.cljs$lang$type = true);

(compound2.core.t_compound2$core22585.cljs$lang$ctorStr = "compound2.core/t_compound2$core22585");

(compound2.core.t_compound2$core22585.cljs$lang$ctorPrWriter = (function (this__4450__auto__,writer__4451__auto__,opt__4452__auto__){
return cljs.core._write(writer__4451__auto__,"compound2.core/t_compound2$core22585");
}));

/**
 * Positional factory function for compound2.core/t_compound2$core22585.
 */
compound2.core.__GT_t_compound2$core22585 = (function compound2$core$__GT_t_compound2$core22585(opts__$1,map__22584__$2,id__$2,kfn__$1,meta22586){
return (new compound2.core.t_compound2$core22585(opts__$1,map__22584__$2,id__$2,kfn__$1,meta22586));
});

}

return (new compound2.core.t_compound2$core22585(opts,map__22584__$1,id__$1,kfn,cljs.core.PersistentArrayMap.EMPTY));
}));
compound2.core.dissoc_in = (function compound2$core$dissoc_in(m,p__22588){
var vec__22589 = p__22588;
var seq__22590 = cljs.core.seq(vec__22589);
var first__22591 = cljs.core.first(seq__22590);
var seq__22590__$1 = cljs.core.next(seq__22590);
var k = first__22591;
var ks = seq__22590__$1;
if(ks){
var m2 = (function (){var G__22592 = (m.cljs$core$IFn$_invoke$arity$1 ? m.cljs$core$IFn$_invoke$arity$1(k) : m.call(null,k));
var G__22593 = ks;
return (compound2.core.dissoc_in.cljs$core$IFn$_invoke$arity$2 ? compound2.core.dissoc_in.cljs$core$IFn$_invoke$arity$2(G__22592,G__22593) : compound2.core.dissoc_in.call(null,G__22592,G__22593));
})();
if(cljs.core.empty_QMARK_(m2)){
return cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(m,k);
} else {
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(m,k,m2);
}
} else {
return cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(m,k);
}
});
compound2.core.indexer.cljs$core$IMultiFn$_add_method$arity$3(null,cljs.core.cst$kw$nested_DASH_to_DASH_one,(function (opts){
var map__22594 = opts;
var map__22594__$1 = cljs.core.__destructure_map(map__22594);
var id = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__22594__$1,cljs.core.cst$kw$id);
var path = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__22594__$1,cljs.core.cst$kw$path);
var id__$1 = (function (){var or__4212__auto__ = id;
if(cljs.core.truth_(or__4212__auto__)){
return or__4212__auto__;
} else {
if(cljs.core.vector_QMARK_(path)){
return path;
} else {
return null;
}
}
})();
if((!((id__$1 == null)))){
} else {
throw (new Error(["Assert failed: ","Must provide an id","\n","(some? id)"].join('')));
}

if((typeof compound2 !== 'undefined') && (typeof compound2.core !== 'undefined') && (typeof compound2.core.t_compound2$core22595 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IMeta}
 * @implements {compound2.core.Index}
 * @implements {cljs.core.IWithMeta}
*/
compound2.core.t_compound2$core22595 = (function (opts,map__22594,id,path,meta22596){
this.opts = opts;
this.map__22594 = map__22594;
this.id = id;
this.path = path;
this.meta22596 = meta22596;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(compound2.core.t_compound2$core22595.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_22597,meta22596__$1){
var self__ = this;
var _22597__$1 = this;
return (new compound2.core.t_compound2$core22595(self__.opts,self__.map__22594,self__.id,self__.path,meta22596__$1));
}));

(compound2.core.t_compound2$core22595.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_22597){
var self__ = this;
var _22597__$1 = this;
return self__.meta22596;
}));

(compound2.core.t_compound2$core22595.prototype.compound2$core$Index$ = cljs.core.PROTOCOL_SENTINEL);

(compound2.core.t_compound2$core22595.prototype.compound2$core$Index$id$arity$1 = (function (this$){
var self__ = this;
var this$__$1 = this;
return self__.id;
}));

(compound2.core.t_compound2$core22595.prototype.compound2$core$Index$extract_key$arity$2 = (function (this$,x){
var self__ = this;
var this$__$1 = this;
return cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentVector.EMPTY,(function (){var iter__4611__auto__ = (function compound2$core$iter__22598(s__22599){
return (new cljs.core.LazySeq(null,(function (){
var s__22599__$1 = s__22599;
while(true){
var temp__5753__auto__ = cljs.core.seq(s__22599__$1);
if(temp__5753__auto__){
var s__22599__$2 = temp__5753__auto__;
if(cljs.core.chunked_seq_QMARK_(s__22599__$2)){
var c__4609__auto__ = cljs.core.chunk_first(s__22599__$2);
var size__4610__auto__ = cljs.core.count(c__4609__auto__);
var b__22601 = cljs.core.chunk_buffer(size__4610__auto__);
if((function (){var i__22600 = (0);
while(true){
if((i__22600 < size__4610__auto__)){
var p = cljs.core._nth.cljs$core$IFn$_invoke$arity$2(c__4609__auto__,i__22600);
cljs.core.chunk_append(b__22601,(p.cljs$core$IFn$_invoke$arity$1 ? p.cljs$core$IFn$_invoke$arity$1(x) : p.call(null,x)));

var G__22602 = (i__22600 + (1));
i__22600 = G__22602;
continue;
} else {
return true;
}
break;
}
})()){
return cljs.core.chunk_cons(cljs.core.chunk(b__22601),compound2$core$iter__22598(cljs.core.chunk_rest(s__22599__$2)));
} else {
return cljs.core.chunk_cons(cljs.core.chunk(b__22601),null);
}
} else {
var p = cljs.core.first(s__22599__$2);
return cljs.core.cons((p.cljs$core$IFn$_invoke$arity$1 ? p.cljs$core$IFn$_invoke$arity$1(x) : p.call(null,x)),compound2$core$iter__22598(cljs.core.rest(s__22599__$2)));
}
} else {
return null;
}
break;
}
}),null,null));
});
return iter__4611__auto__(self__.path);
})());
}));

(compound2.core.t_compound2$core22595.prototype.compound2$core$Index$index$arity$4 = (function (this$,coll,ks,x){
var self__ = this;
var this$__$1 = this;
return cljs.core.assoc_in(coll,ks,x);
}));

(compound2.core.t_compound2$core22595.prototype.compound2$core$Index$unindex$arity$4 = (function (this$,coll,ks,x){
var self__ = this;
var this$__$1 = this;
return compound2.core.dissoc_in(coll,ks);
}));

(compound2.core.t_compound2$core22595.prototype.compound2$core$Index$after$arity$2 = (function (this$,coll){
var self__ = this;
var this$__$1 = this;
return coll;
}));

(compound2.core.t_compound2$core22595.prototype.compound2$core$Index$before$arity$2 = (function (this$,coll){
var self__ = this;
var this$__$1 = this;
var or__4212__auto__ = coll;
if(cljs.core.truth_(or__4212__auto__)){
return or__4212__auto__;
} else {
return cljs.core.PersistentArrayMap.EMPTY;
}
}));

(compound2.core.t_compound2$core22595.getBasis = (function (){
return new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$opts,cljs.core.cst$sym$map__22594,cljs.core.cst$sym$id,cljs.core.cst$sym$path,cljs.core.cst$sym$meta22596], null);
}));

(compound2.core.t_compound2$core22595.cljs$lang$type = true);

(compound2.core.t_compound2$core22595.cljs$lang$ctorStr = "compound2.core/t_compound2$core22595");

(compound2.core.t_compound2$core22595.cljs$lang$ctorPrWriter = (function (this__4450__auto__,writer__4451__auto__,opt__4452__auto__){
return cljs.core._write(writer__4451__auto__,"compound2.core/t_compound2$core22595");
}));

/**
 * Positional factory function for compound2.core/t_compound2$core22595.
 */
compound2.core.__GT_t_compound2$core22595 = (function compound2$core$__GT_t_compound2$core22595(opts__$1,map__22594__$2,id__$2,path__$1,meta22596){
return (new compound2.core.t_compound2$core22595(opts__$1,map__22594__$2,id__$2,path__$1,meta22596));
});

}

return (new compound2.core.t_compound2$core22595(opts,map__22594__$1,id__$1,path,cljs.core.PersistentArrayMap.EMPTY));
}));
compound2.core.indexer.cljs$core$IMultiFn$_add_method$arity$3(null,cljs.core.cst$kw$nested_DASH_to_DASH_many,(function (opts){
var map__22603 = opts;
var map__22603__$1 = cljs.core.__destructure_map(map__22603);
var id = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__22603__$1,cljs.core.cst$kw$id);
var path = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__22603__$1,cljs.core.cst$kw$path);
var id__$1 = (function (){var or__4212__auto__ = id;
if(cljs.core.truth_(or__4212__auto__)){
return or__4212__auto__;
} else {
if(cljs.core.vector_QMARK_(path)){
return path;
} else {
return null;
}
}
})();
if((!((id__$1 == null)))){
} else {
throw (new Error(["Assert failed: ","Must provide an id","\n","(some? id)"].join('')));
}

if((typeof compound2 !== 'undefined') && (typeof compound2.core !== 'undefined') && (typeof compound2.core.t_compound2$core22604 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IMeta}
 * @implements {compound2.core.Index}
 * @implements {cljs.core.IWithMeta}
*/
compound2.core.t_compound2$core22604 = (function (opts,map__22603,id,path,meta22605){
this.opts = opts;
this.map__22603 = map__22603;
this.id = id;
this.path = path;
this.meta22605 = meta22605;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(compound2.core.t_compound2$core22604.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_22606,meta22605__$1){
var self__ = this;
var _22606__$1 = this;
return (new compound2.core.t_compound2$core22604(self__.opts,self__.map__22603,self__.id,self__.path,meta22605__$1));
}));

(compound2.core.t_compound2$core22604.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_22606){
var self__ = this;
var _22606__$1 = this;
return self__.meta22605;
}));

(compound2.core.t_compound2$core22604.prototype.compound2$core$Index$ = cljs.core.PROTOCOL_SENTINEL);

(compound2.core.t_compound2$core22604.prototype.compound2$core$Index$id$arity$1 = (function (this$){
var self__ = this;
var this$__$1 = this;
return self__.id;
}));

(compound2.core.t_compound2$core22604.prototype.compound2$core$Index$extract_key$arity$2 = (function (this$,x){
var self__ = this;
var this$__$1 = this;
return cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentVector.EMPTY,(function (){var iter__4611__auto__ = (function compound2$core$iter__22607(s__22608){
return (new cljs.core.LazySeq(null,(function (){
var s__22608__$1 = s__22608;
while(true){
var temp__5753__auto__ = cljs.core.seq(s__22608__$1);
if(temp__5753__auto__){
var s__22608__$2 = temp__5753__auto__;
if(cljs.core.chunked_seq_QMARK_(s__22608__$2)){
var c__4609__auto__ = cljs.core.chunk_first(s__22608__$2);
var size__4610__auto__ = cljs.core.count(c__4609__auto__);
var b__22610 = cljs.core.chunk_buffer(size__4610__auto__);
if((function (){var i__22609 = (0);
while(true){
if((i__22609 < size__4610__auto__)){
var p = cljs.core._nth.cljs$core$IFn$_invoke$arity$2(c__4609__auto__,i__22609);
cljs.core.chunk_append(b__22610,(p.cljs$core$IFn$_invoke$arity$1 ? p.cljs$core$IFn$_invoke$arity$1(x) : p.call(null,x)));

var G__22611 = (i__22609 + (1));
i__22609 = G__22611;
continue;
} else {
return true;
}
break;
}
})()){
return cljs.core.chunk_cons(cljs.core.chunk(b__22610),compound2$core$iter__22607(cljs.core.chunk_rest(s__22608__$2)));
} else {
return cljs.core.chunk_cons(cljs.core.chunk(b__22610),null);
}
} else {
var p = cljs.core.first(s__22608__$2);
return cljs.core.cons((p.cljs$core$IFn$_invoke$arity$1 ? p.cljs$core$IFn$_invoke$arity$1(x) : p.call(null,x)),compound2$core$iter__22607(cljs.core.rest(s__22608__$2)));
}
} else {
return null;
}
break;
}
}),null,null));
});
return iter__4611__auto__(self__.path);
})());
}));

(compound2.core.t_compound2$core22604.prototype.compound2$core$Index$index$arity$4 = (function (this$,coll,ks,x){
var self__ = this;
var this$__$1 = this;
return cljs.core.update_in.cljs$core$IFn$_invoke$arity$4(coll,ks,cljs.core.fnil.cljs$core$IFn$_invoke$arity$2(cljs.core.conj,cljs.core.PersistentHashSet.EMPTY),x);
}));

(compound2.core.t_compound2$core22604.prototype.compound2$core$Index$unindex$arity$4 = (function (this$,coll,ks,x){
var self__ = this;
var this$__$1 = this;
var ex = cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(coll,ks);
var new$ = cljs.core.disj.cljs$core$IFn$_invoke$arity$2(ex,x);
if(cljs.core.seq(new$)){
return cljs.core.assoc_in(coll,ks,new$);
} else {
return compound2.core.dissoc_in(coll,ks);
}
}));

(compound2.core.t_compound2$core22604.prototype.compound2$core$Index$after$arity$2 = (function (this$,coll){
var self__ = this;
var this$__$1 = this;
return coll;
}));

(compound2.core.t_compound2$core22604.prototype.compound2$core$Index$before$arity$2 = (function (this$,coll){
var self__ = this;
var this$__$1 = this;
var or__4212__auto__ = coll;
if(cljs.core.truth_(or__4212__auto__)){
return or__4212__auto__;
} else {
return cljs.core.PersistentArrayMap.EMPTY;
}
}));

(compound2.core.t_compound2$core22604.getBasis = (function (){
return new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$opts,cljs.core.cst$sym$map__22603,cljs.core.cst$sym$id,cljs.core.cst$sym$path,cljs.core.cst$sym$meta22605], null);
}));

(compound2.core.t_compound2$core22604.cljs$lang$type = true);

(compound2.core.t_compound2$core22604.cljs$lang$ctorStr = "compound2.core/t_compound2$core22604");

(compound2.core.t_compound2$core22604.cljs$lang$ctorPrWriter = (function (this__4450__auto__,writer__4451__auto__,opt__4452__auto__){
return cljs.core._write(writer__4451__auto__,"compound2.core/t_compound2$core22604");
}));

/**
 * Positional factory function for compound2.core/t_compound2$core22604.
 */
compound2.core.__GT_t_compound2$core22604 = (function compound2$core$__GT_t_compound2$core22604(opts__$1,map__22603__$2,id__$2,path__$1,meta22605){
return (new compound2.core.t_compound2$core22604(opts__$1,map__22603__$2,id__$2,path__$1,meta22605));
});

}

return (new compound2.core.t_compound2$core22604(opts,map__22603__$1,id__$1,path,cljs.core.PersistentArrayMap.EMPTY));
}));
compound2.core.indexer.cljs$core$IMultiFn$_add_method$arity$3(null,cljs.core.cst$kw$many_DASH_to_DASH_many,(function (opts){
var map__22612 = opts;
var map__22612__$1 = cljs.core.__destructure_map(map__22612);
var id = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__22612__$1,cljs.core.cst$kw$id);
var kfn = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__22612__$1,cljs.core.cst$kw$kfn);
var id__$1 = (function (){var or__4212__auto__ = id;
if(cljs.core.truth_(or__4212__auto__)){
return or__4212__auto__;
} else {
if((kfn instanceof cljs.core.Keyword)){
return kfn;
} else {
return null;
}
}
})();
if((!((id__$1 == null)))){
} else {
throw (new Error(["Assert failed: ","Must provide an id","\n","(some? id)"].join('')));
}

if((typeof compound2 !== 'undefined') && (typeof compound2.core !== 'undefined') && (typeof compound2.core.t_compound2$core22613 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IMeta}
 * @implements {compound2.core.Index}
 * @implements {cljs.core.IWithMeta}
*/
compound2.core.t_compound2$core22613 = (function (opts,map__22612,id,kfn,meta22614){
this.opts = opts;
this.map__22612 = map__22612;
this.id = id;
this.kfn = kfn;
this.meta22614 = meta22614;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(compound2.core.t_compound2$core22613.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_22615,meta22614__$1){
var self__ = this;
var _22615__$1 = this;
return (new compound2.core.t_compound2$core22613(self__.opts,self__.map__22612,self__.id,self__.kfn,meta22614__$1));
}));

(compound2.core.t_compound2$core22613.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_22615){
var self__ = this;
var _22615__$1 = this;
return self__.meta22614;
}));

(compound2.core.t_compound2$core22613.prototype.compound2$core$Index$ = cljs.core.PROTOCOL_SENTINEL);

(compound2.core.t_compound2$core22613.prototype.compound2$core$Index$id$arity$1 = (function (this$){
var self__ = this;
var this$__$1 = this;
return self__.id;
}));

(compound2.core.t_compound2$core22613.prototype.compound2$core$Index$extract_key$arity$2 = (function (this$,x){
var self__ = this;
var this$__$1 = this;
return (self__.kfn.cljs$core$IFn$_invoke$arity$1 ? self__.kfn.cljs$core$IFn$_invoke$arity$1(x) : self__.kfn.call(null,x));
}));

(compound2.core.t_compound2$core22613.prototype.compound2$core$Index$index$arity$4 = (function (this$,coll,ks,x){
var self__ = this;
var this$__$1 = this;
return cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (acc,k){
return cljs.core.update.cljs$core$IFn$_invoke$arity$4(acc,k,cljs.core.fnil.cljs$core$IFn$_invoke$arity$2(cljs.core.conj,cljs.core.PersistentHashSet.EMPTY),x);
}),coll,ks);
}));

(compound2.core.t_compound2$core22613.prototype.compound2$core$Index$unindex$arity$4 = (function (this$,coll,ks,x){
var self__ = this;
var this$__$1 = this;
return cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (acc,k){
return cljs.core.update.cljs$core$IFn$_invoke$arity$4(acc,k,cljs.core.disj,x);
}),coll,ks);
}));

(compound2.core.t_compound2$core22613.prototype.compound2$core$Index$after$arity$2 = (function (this$,coll){
var self__ = this;
var this$__$1 = this;
return coll;
}));

(compound2.core.t_compound2$core22613.prototype.compound2$core$Index$before$arity$2 = (function (this$,coll){
var self__ = this;
var this$__$1 = this;
var or__4212__auto__ = coll;
if(cljs.core.truth_(or__4212__auto__)){
return or__4212__auto__;
} else {
return cljs.core.PersistentArrayMap.EMPTY;
}
}));

(compound2.core.t_compound2$core22613.getBasis = (function (){
return new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$opts,cljs.core.cst$sym$map__22612,cljs.core.cst$sym$id,cljs.core.cst$sym$kfn,cljs.core.cst$sym$meta22614], null);
}));

(compound2.core.t_compound2$core22613.cljs$lang$type = true);

(compound2.core.t_compound2$core22613.cljs$lang$ctorStr = "compound2.core/t_compound2$core22613");

(compound2.core.t_compound2$core22613.cljs$lang$ctorPrWriter = (function (this__4450__auto__,writer__4451__auto__,opt__4452__auto__){
return cljs.core._write(writer__4451__auto__,"compound2.core/t_compound2$core22613");
}));

/**
 * Positional factory function for compound2.core/t_compound2$core22613.
 */
compound2.core.__GT_t_compound2$core22613 = (function compound2$core$__GT_t_compound2$core22613(opts__$1,map__22612__$2,id__$2,kfn__$1,meta22614){
return (new compound2.core.t_compound2$core22613(opts__$1,map__22612__$2,id__$2,kfn__$1,meta22614));
});

}

return (new compound2.core.t_compound2$core22613(opts,map__22612__$1,id__$1,kfn,cljs.core.PersistentArrayMap.EMPTY));
}));
compound2.core.primary_defaults = new cljs.core.PersistentArrayMap(null, 1, [cljs.core.cst$kw$index_DASH_type,cljs.core.cst$kw$one_DASH_to_DASH_one], null);
compound2.core.secondary_defaults = new cljs.core.PersistentArrayMap(null, 1, [cljs.core.cst$kw$index_DASH_type,cljs.core.cst$kw$one_DASH_to_DASH_many], null);
compound2.core.compound_STAR_ = (function compound2$core$compound_STAR_(indexes){
var pi = (function (){var G__22616 = cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([compound2.core.primary_defaults,cljs.core.first(indexes)], 0));
return (compound2.core.indexer.cljs$core$IFn$_invoke$arity$1 ? compound2.core.indexer.cljs$core$IFn$_invoke$arity$1(G__22616) : compound2.core.indexer.call(null,G__22616));
})();
var sis = cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (opts){
var G__22617 = cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([compound2.core.secondary_defaults,opts], 0));
return (compound2.core.indexer.cljs$core$IFn$_invoke$arity$1 ? compound2.core.indexer.cljs$core$IFn$_invoke$arity$1(G__22617) : compound2.core.indexer.call(null,G__22617));
}),cljs.core.rest(indexes));
if((((!((pi == null))))?((((false) || ((cljs.core.PROTOCOL_SENTINEL === pi.compound2$core$PrimaryIndex$))))?true:(((!pi.cljs$lang$protocol_mask$partition$))?cljs.core.native_satisfies_QMARK_(compound2.core.PrimaryIndex,pi):false)):cljs.core.native_satisfies_QMARK_(compound2.core.PrimaryIndex,pi))){
} else {
throw (new Error(["Assert failed: ","First index must be a primary index","\n","(satisfies? PrimaryIndex pi)"].join('')));
}

return cljs.core.with_meta(cljs.core.PersistentArrayMap.EMPTY,new cljs.core.PersistentArrayMap(null, 3, [cljs.core.cst$sym$compound2$core_SLASH_items,(function (c){
return compound2.core.get_all(pi,cljs.core.get.cljs$core$IFn$_invoke$arity$2(c,compound2.core.id(pi)));
}),cljs.core.cst$sym$compound2$core_SLASH_add_DASH_items,(function (c,xs){
var px = compound2.core.before(pi,cljs.core.get.cljs$core$IFn$_invoke$arity$2(c,compound2.core.id(pi)));
var sixs = cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (acc,si){
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(acc,si,compound2.core.before(si,cljs.core.get.cljs$core$IFn$_invoke$arity$2(c,compound2.core.id(si))));
}),cljs.core.PersistentArrayMap.EMPTY,sis);
var G__22622 = xs;
var vec__22623 = G__22622;
var seq__22624 = cljs.core.seq(vec__22623);
var first__22625 = cljs.core.first(seq__22624);
var seq__22624__$1 = cljs.core.next(seq__22624);
var x = first__22625;
var more = seq__22624__$1;
var xs__$1 = vec__22623;
var px__$1 = px;
var sixs__$1 = sixs;
var G__22622__$1 = G__22622;
while(true){
var px__$2 = px__$1;
var sixs__$2 = sixs__$1;
var vec__22629 = G__22622__$1;
var seq__22630 = cljs.core.seq(vec__22629);
var first__22631 = cljs.core.first(seq__22630);
var seq__22630__$1 = cljs.core.next(seq__22630);
var x__$1 = first__22631;
var more__$1 = seq__22630__$1;
var xs__$2 = vec__22629;
if(cljs.core.seq(xs__$2)){
var k = compound2.core.extract_key(pi,x__$1);
var ex = compound2.core.get_by_key(pi,px__$2,k);
if(cljs.core.truth_(ex)){
var new$ = compound2.core.on_conflict(pi,ex,x__$1);
var G__22645 = compound2.core.index(pi,px__$2,k,new$);
var G__22646 = cljs.core.reduce_kv(((function (px__$1,sixs__$1,G__22622__$1,new$,k,ex,px__$2,sixs__$2,vec__22629,seq__22630,first__22631,seq__22630__$1,x__$1,more__$1,xs__$2,px,sixs,G__22622,vec__22623,seq__22624,first__22625,seq__22624__$1,x,more,xs__$1,pi,sis){
return (function (acc,si,sx){
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(acc,si,(function (){var k1 = compound2.core.extract_key(si,ex);
var k2 = compound2.core.extract_key(si,new$);
return compound2.core.index(si,compound2.core.unindex(si,sx,k1,ex),k2,new$);
})());
});})(px__$1,sixs__$1,G__22622__$1,new$,k,ex,px__$2,sixs__$2,vec__22629,seq__22630,first__22631,seq__22630__$1,x__$1,more__$1,xs__$2,px,sixs,G__22622,vec__22623,seq__22624,first__22625,seq__22624__$1,x,more,xs__$1,pi,sis))
,cljs.core.PersistentArrayMap.EMPTY,sixs__$2);
var G__22647 = more__$1;
px__$1 = G__22645;
sixs__$1 = G__22646;
G__22622__$1 = G__22647;
continue;
} else {
var G__22648 = compound2.core.index(pi,px__$2,k,x__$1);
var G__22649 = cljs.core.reduce_kv(((function (px__$1,sixs__$1,G__22622__$1,k,ex,px__$2,sixs__$2,vec__22629,seq__22630,first__22631,seq__22630__$1,x__$1,more__$1,xs__$2,px,sixs,G__22622,vec__22623,seq__22624,first__22625,seq__22624__$1,x,more,xs__$1,pi,sis){
return (function (acc,si,sx){
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(acc,si,(function (){var k__$1 = compound2.core.extract_key(si,x__$1);
return compound2.core.index(si,sx,k__$1,x__$1);
})());
});})(px__$1,sixs__$1,G__22622__$1,k,ex,px__$2,sixs__$2,vec__22629,seq__22630,first__22631,seq__22630__$1,x__$1,more__$1,xs__$2,px,sixs,G__22622,vec__22623,seq__22624,first__22625,seq__22624__$1,x,more,xs__$1,pi,sis))
,cljs.core.PersistentArrayMap.EMPTY,sixs__$2);
var G__22650 = more__$1;
px__$1 = G__22648;
sixs__$1 = G__22649;
G__22622__$1 = G__22650;
continue;
}
} else {
return cljs.core.with_meta(cljs.core.reduce_kv(((function (px__$1,sixs__$1,G__22622__$1,px__$2,sixs__$2,vec__22629,seq__22630,first__22631,seq__22630__$1,x__$1,more__$1,xs__$2,px,sixs,G__22622,vec__22623,seq__22624,first__22625,seq__22624__$1,x,more,xs__$1,pi,sis){
return (function (acc,si,sx){
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(acc,compound2.core.id(si),compound2.core.after(si,sx));
});})(px__$1,sixs__$1,G__22622__$1,px__$2,sixs__$2,vec__22629,seq__22630,first__22631,seq__22630__$1,x__$1,more__$1,xs__$2,px,sixs,G__22622,vec__22623,seq__22624,first__22625,seq__22624__$1,x,more,xs__$1,pi,sis))
,cljs.core.PersistentArrayMap.createAsIfByAssoc([compound2.core.id(pi),compound2.core.after(pi,px__$2)]),sixs__$2),cljs.core.meta(c));
}
break;
}
}),cljs.core.cst$sym$compound2$core_SLASH_remove_DASH_keys,(function (c,ks){
var px = compound2.core.before(pi,cljs.core.get.cljs$core$IFn$_invoke$arity$2(c,compound2.core.id(pi)));
var sixs = cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (acc,si){
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(acc,si,compound2.core.before(si,cljs.core.get.cljs$core$IFn$_invoke$arity$2(c,compound2.core.id(si))));
}),cljs.core.PersistentArrayMap.EMPTY,sis);
var G__22635 = ks;
var vec__22636 = G__22635;
var seq__22637 = cljs.core.seq(vec__22636);
var first__22638 = cljs.core.first(seq__22637);
var seq__22637__$1 = cljs.core.next(seq__22637);
var k = first__22638;
var more = seq__22637__$1;
var ks__$1 = vec__22636;
var px__$1 = px;
var sixs__$1 = sixs;
var G__22635__$1 = G__22635;
while(true){
var px__$2 = px__$1;
var sixs__$2 = sixs__$1;
var vec__22642 = G__22635__$1;
var seq__22643 = cljs.core.seq(vec__22642);
var first__22644 = cljs.core.first(seq__22643);
var seq__22643__$1 = cljs.core.next(seq__22643);
var k__$1 = first__22644;
var more__$1 = seq__22643__$1;
var ks__$2 = vec__22642;
if(cljs.core.seq(ks__$2)){
var temp__5751__auto__ = compound2.core.get_by_key(pi,px__$2,k__$1);
if(cljs.core.truth_(temp__5751__auto__)){
var ex = temp__5751__auto__;
var G__22651 = compound2.core.unindex(pi,px__$2,k__$1,ex);
var G__22652 = cljs.core.reduce_kv(((function (px__$1,sixs__$1,G__22635__$1,ex,temp__5751__auto__,px__$2,sixs__$2,vec__22642,seq__22643,first__22644,seq__22643__$1,k__$1,more__$1,ks__$2,px,sixs,G__22635,vec__22636,seq__22637,first__22638,seq__22637__$1,k,more,ks__$1,pi,sis){
return (function (acc,si,sx){
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(acc,si,(function (){var k__$2 = compound2.core.extract_key(si,ex);
return compound2.core.unindex(si,sx,k__$2,ex);
})());
});})(px__$1,sixs__$1,G__22635__$1,ex,temp__5751__auto__,px__$2,sixs__$2,vec__22642,seq__22643,first__22644,seq__22643__$1,k__$1,more__$1,ks__$2,px,sixs,G__22635,vec__22636,seq__22637,first__22638,seq__22637__$1,k,more,ks__$1,pi,sis))
,cljs.core.PersistentArrayMap.EMPTY,sixs__$2);
var G__22653 = more__$1;
px__$1 = G__22651;
sixs__$1 = G__22652;
G__22635__$1 = G__22653;
continue;
} else {
var G__22654 = px__$2;
var G__22655 = sixs__$2;
var G__22656 = more__$1;
px__$1 = G__22654;
sixs__$1 = G__22655;
G__22635__$1 = G__22656;
continue;
}
} else {
return cljs.core.with_meta(cljs.core.reduce_kv(((function (px__$1,sixs__$1,G__22635__$1,px__$2,sixs__$2,vec__22642,seq__22643,first__22644,seq__22643__$1,k__$1,more__$1,ks__$2,px,sixs,G__22635,vec__22636,seq__22637,first__22638,seq__22637__$1,k,more,ks__$1,pi,sis){
return (function (acc,si,sx){
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(acc,compound2.core.id(si),compound2.core.after(si,sx));
});})(px__$1,sixs__$1,G__22635__$1,px__$2,sixs__$2,vec__22642,seq__22643,first__22644,seq__22643__$1,k__$1,more__$1,ks__$2,px,sixs,G__22635,vec__22636,seq__22637,first__22638,seq__22637__$1,k,more,ks__$1,pi,sis))
,cljs.core.PersistentArrayMap.createAsIfByAssoc([compound2.core.id(pi),compound2.core.after(pi,px__$2)]),sixs__$2),cljs.core.meta(c));
}
break;
}
})], null));
});
